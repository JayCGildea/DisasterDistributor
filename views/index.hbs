<nav>
  <div class="nav-wrapper wrapper">
    <ul>
      <li><i class="fa fa-cutlery fa-3x"></i></li>
      <li><i class="fa fa-tint fa-3x"></i></li>
      <li><i class="fa fa-fire fa-3x"></i></li>
    </ul>
    <ul>
      <li id="foodlist"></li>
      <li id="waterlist"></li>
      <li id="gaslist"></li>
    </ul>
  </div>
</nav>

<div id="map">
</div>

<script
async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_uc84ANbe0t8Y1Hxc7lDtu8I9SY4Okk8&libraries=visualization&callback=initMap">
</script>

<script type="text/javascript">
    var map;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 2,
            center: new google.maps.LatLng(2.8, -187.3),
            mapTypeId: 'terrain'
        });

        var heatmapData = [];
        $.getJSON("/data/needSupplies.json", function(json1) {
            $.each(json1, function(key, data) {
                var latLng = new google.maps.LatLng(data.lat, data.lng);
                var weightedLoc = {
                    location: latLng,
                    weight: (data.food + data.water + data.gas) / 5000,
                };
                heatmapData.push(weightedLoc);
            });
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: heatmapData,
                dissipating: false,
                radius: 2,
                map: map
            });
        });

        $.getJSON("/data/supplies.json", function(json1) {
            $.each(json1, function(key, data) {
                var latLng = new google.maps.LatLng(data.lat, data.lng);
                var marker = new google.maps.Marker({
                    position: latLng,
                    title: data.name,
                });
                marker.data = {
                    "name" : data.name,
                    "food": data.food,
                    "water": data.water,
                    "gas": data.gas,
                }
                google.maps.event.addListener(marker, 'click', markerClicked);
                marker.setMap(map);
            });
        });

        function markerClicked(e) {
            document.getElementById("foodlist").innerHTML = data.food;
            document.getElementById("waterlist").innerHTML = data.water;
            document.getElementById("gaslist").innerHTML = data.gas;
        }


    }

    // Loop through the results array and place a marker for each
    // set of coordinates.
</script>