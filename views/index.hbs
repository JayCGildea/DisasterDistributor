<nav>
  <div class="nav-wrapper">
    <ul id="nav-mobile" class="center">
      <li><i class="fa fa-cutlery"></i></li>
      <li><i class="fa fa-tint"></i></li>
      <li><i class="fa fa-fire"></i></li>
    </ul>
  </div>
</nav>

<div id="map">
</div>

<script
async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_uc84ANbe0t8Y1Hxc7lDtu8I9SY4Okk8&libraries=visualization&callback=initMap">
</script>

<script type="text/javascript">
    var map;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 2,
            center: new google.maps.LatLng(2.8, -187.3),
            mapTypeId: 'terrain'
        });

        var heatmapData = [];
        $.getJSON("/data/needSupplies.json", function(json1) {
            $.each(json1, function(key, data) {
                var latLng = new google.maps.LatLng(data.lat, data.lng);
                var weightedLoc = {
                    location: latLng,
                    weight: (data.food + data.water + data.gas) / 5000,
                };
                heatmapData.push(weightedLoc);
            });
            var heatmap = new google.maps.visualization.HeatmapLayer({
                data: heatmapData,
                dissipating: false,
                radius: 2,
                map: map
            });
        });

        $.getJSON("/data/supplies.json", function(json1) {
            $.each(json1, function(key, data) {
                var latLng = new google.maps.LatLng(data.lat, data.lng);
                var marker = new google.maps.Marker({
                    position: latLng,
                    title: data.name,
                });
                marker.setMap(map);
            });
        });

        google.maps.event.addListener(map, 'click', function(event) {
            placeMarker(event.latLng);
        });

        function placeMarker(location) {
            var marker = new google.maps.Marker({
                position: location,
                map: map
            });
            map.setCenter(location);
        }

    }

    // Loop through the results array and place a marker for each
    // set of coordinates.
</script>